# üéØ Spatial Hashing - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

## –î–∞—Ç–∞: 2025-10-15

---

## üìö –ß—Ç–æ —Ç–∞–∫–æ–µ Spatial Hashing?

**Spatial Hashing** (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ) - —ç—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∏–≥—Ä–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –Ω–∞ —Å–µ—Ç–∫—É —è—á–µ–µ–∫.

### –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è:

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å 1000 –∫–Ω–∏–≥:

**‚ùå –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥):**
- –ò—â–µ—Ç–µ –∫–Ω–∏–≥—É "–í–æ–π–Ω–∞ –∏ –º–∏—Ä"
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –í–°–ï 1000 –∫–Ω–∏–≥ –æ–¥–Ω—É –∑–∞ –¥—Ä—É–≥–æ–π
- –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞: O(n) = 1000 –ø—Ä–æ–≤–µ—Ä–æ–∫

**‚úÖ –° Spatial Hashing:**
- –ö–Ω–∏–≥–∏ —Ä–∞–∑–ª–æ–∂–µ–Ω—ã –ø–æ –ø–æ–ª–∫–∞–º (–ê-–Ø)
- –ò—â–µ—Ç–µ "–í–æ–π–Ω–∞ –∏ –º–∏—Ä" ‚Üí –∏–¥–µ—Ç–µ –Ω–∞ –ø–æ–ª–∫—É "–í"
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ —Ç–æ–ª—å–∫–æ ~40 –∫–Ω–∏–≥ –Ω–∞ —ç—Ç–æ–π –ø–æ–ª–∫–µ
- –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞: O(1) = 40 –ø—Ä–æ–≤–µ—Ä–æ–∫

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1000 / 40 = 25 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!**

---

## üé± –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –±–∏–ª—å—è—Ä–¥–∞?

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–§–∞–π–ª:** `controllers/PhysicsController.js:414-434`

```javascript
this.collideBallWithBalls = function (oBall) {
  for (var i = 0; i < _aBalls.length; i++) {  // ‚ùå –ü—Ä–æ–≤–µ—Ä—è–µ–º –í–°–ï —à–∞—Ä—ã!
    if (_aBalls[i].getNumber() !== oBall.getNumber() &&
        _aBalls[i].isBallOnTable() &&
        _aBalls[i].getHole() === null) {
      
      tmpDist = distance2(oBall.getPos(), _aBalls[i].getPos());
      
      if (tmpDist <= BALL_DIAMETER_QUADRO) {
        // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ!
      }
    }
  }
};
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- 16 —à–∞—Ä–æ–≤ –Ω–∞ —Å—Ç–æ–ª–µ
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º 15 –¥—Ä—É–≥–∏—Ö —à–∞—Ä–æ–≤
- **16 √ó 15 / 2 = 120 –ø—Ä–æ–≤–µ—Ä–æ–∫** –Ω–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
- **120 √ó 60 FPS = 7200 –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É**
- **7200 √ó 100 –∏–≥—Ä = 720,000 –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É!** üí•

### –†–µ—à–µ–Ω–∏–µ: Spatial Hashing

**–ò–¥–µ—è:** –†–∞–∑–¥–µ–ª–∏—Ç—å —Å—Ç–æ–ª –Ω–∞ —Å–µ—Ç–∫—É —è—á–µ–µ–∫

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  (0,0)  ‚îÇ  (1,0)  ‚îÇ  (2,0)  ‚îÇ  (3,0)  ‚îÇ
‚îÇ    üé±   ‚îÇ         ‚îÇ    üé±   ‚îÇ         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  (0,1)  ‚îÇ  (1,1)  ‚îÇ  (2,1)  ‚îÇ  (3,1)  ‚îÇ
‚îÇ         ‚îÇ  üé±üé±   ‚îÇ         ‚îÇ    üé±   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  (0,2)  ‚îÇ  (1,2)  ‚îÇ  (2,2)  ‚îÇ  (3,2)  ‚îÇ
‚îÇ    üé±   ‚îÇ         ‚îÇ    üé±   ‚îÇ         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–¢–µ–ø–µ—Ä—å:**
- –®–∞—Ä –≤ —è—á–µ–π–∫–µ (1,1) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å —à–∞—Ä–∞–º–∏ –≤:
  - –¢–æ–π –∂–µ —è—á–µ–π–∫–µ (1,1)
  - –°–æ—Å–µ–¥–Ω–∏—Ö —è—á–µ–π–∫–∞—Ö (0,0), (1,0), (2,0), (0,1), (2,1), (0,2), (1,2), (2,2)
- **–í–º–µ—Å—Ç–æ 15 –ø—Ä–æ–≤–µ—Ä–æ–∫ ‚Üí 2-4 –ø—Ä–æ–≤–µ—Ä–∫–∏!**

---

## üìä –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞

### –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (Brute Force):

```
–°–ª–æ–∂–Ω–æ—Å—Ç—å: O(n¬≤)
n = 16 —à–∞—Ä–æ–≤
–ü—Ä–æ–≤–µ—Ä–æ–∫: 16 √ó 15 / 2 = 120
```

### Spatial Hashing:

```
–°–ª–æ–∂–Ω–æ—Å—Ç—å: O(n)
n = 16 —à–∞—Ä–æ–≤
–†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ = 2 √ó –¥–∏–∞–º–µ—Ç—Ä —à–∞—Ä–∞
–°—Ä–µ–¥–Ω–∏—Ö —à–∞—Ä–æ–≤ –≤ —è—á–µ–π–∫–µ = 2-3
–ü—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ —à–∞—Ä = 2-3 √ó 9 —è—á–µ–µ–∫ = 18-27
–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ = 16 √ó 3 / 2 = 24

–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 120 / 24 = 5x –±—ã—Å—Ç—Ä–µ–µ!
```

---

## üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∫–∏

```javascript
// controllers/PhysicsController.js

// –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
var _spatialGrid = null;
var _cellSize = BALL_DIAMETER * 2;  // –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ = 2 –¥–∏–∞–º–µ—Ç—Ä–∞ —à–∞—Ä–∞
var _gridWidth = 0;
var _gridHeight = 0;

this._initSpatialGrid = function() {
  // –†–∞–∑–º–µ—Ä—ã —Å—Ç–æ–ª–∞ –∏–∑ FIELD_POINTS
  var minX = Infinity, maxX = -Infinity;
  var minY = Infinity, maxY = -Infinity;
  
  for (var i = 0; i < FIELD_POINTS.length; i++) {
    if (FIELD_POINTS[i].x < minX) minX = FIELD_POINTS[i].x;
    if (FIELD_POINTS[i].x > maxX) maxX = FIELD_POINTS[i].x;
    if (FIELD_POINTS[i].y < minY) minY = FIELD_POINTS[i].y;
    if (FIELD_POINTS[i].y > maxY) maxY = FIELD_POINTS[i].y;
  }
  
  _gridWidth = Math.ceil((maxX - minX) / _cellSize);
  _gridHeight = Math.ceil((maxY - minY) / _cellSize);
  
  console.log(`üìê Spatial grid: ${_gridWidth}x${_gridHeight} cells`);
};
```

### –®–∞–≥ 2: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–µ—Ç–∫–∏ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä

```javascript
this._buildSpatialGrid = function(aBalls) {
  _spatialGrid = new Map();
  
  for (var i = 0; i < aBalls.length; i++) {
    var ball = aBalls[i];
    
    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —à–∞—Ä—ã –≤ –ª—É–∑–∞—Ö
    if (!ball.isBallOnTable() || ball.getHole() !== null) {
      continue;
    }
    
    // –í—ã—á–∏—Å–ª—è–µ–º —è—á–µ–π–∫—É –¥–ª—è —à–∞—Ä–∞
    var cellX = Math.floor(ball.getX() / _cellSize);
    var cellY = Math.floor(ball.getY() / _cellSize);
    var key = cellX + ',' + cellY;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —à–∞—Ä –≤ —è—á–µ–π–∫—É
    if (!_spatialGrid.has(key)) {
      _spatialGrid.set(key, []);
    }
    _spatialGrid.get(key).push(ball);
  }
};
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å–µ–¥–Ω–∏—Ö —à–∞—Ä–æ–≤

```javascript
this._getNearbyBalls = function(oBall) {
  var nearbyBalls = [];
  
  var cellX = Math.floor(oBall.getX() / _cellSize);
  var cellY = Math.floor(oBall.getY() / _cellSize);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º 9 —è—á–µ–µ–∫: —Ç–µ–∫—É—â—É—é + 8 —Å–æ—Å–µ–¥–Ω–∏—Ö
  for (var dx = -1; dx <= 1; dx++) {
    for (var dy = -1; dy <= 1; dy++) {
      var key = (cellX + dx) + ',' + (cellY + dy);
      
      if (_spatialGrid.has(key)) {
        var cellBalls = _spatialGrid.get(key);
        for (var i = 0; i < cellBalls.length; i++) {
          if (cellBalls[i].getNumber() !== oBall.getNumber()) {
            nearbyBalls.push(cellBalls[i]);
          }
        }
      }
    }
  }
  
  return nearbyBalls;
};
```

### –®–∞–≥ 4: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π

```javascript
// –ù–û–í–ê–Ø –í–ï–†–°–ò–Ø —Å Spatial Hashing
this.collideBallWithBalls = function (oBall) {
  var aCollisions = new Array();
  var tmpDist, minDist = 10000;
  var iPos;
  
  // ‚úÖ –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –±–ª–∏–∑–∫–∏–µ —à–∞—Ä—ã –≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö!
  var nearbyBalls = this._getNearbyBalls(oBall);
  
  for (var i = 0; i < nearbyBalls.length; i++) {
    var otherBall = nearbyBalls[i];
    
    if (otherBall.isBallOnTable() && otherBall.getHole() === null) {
      tmpDist = distance2(oBall.getPos(), otherBall.getPos());
      
      if (tmpDist <= BALL_DIAMETER_QUADRO) {
        aCollisions.push({
          oBall: otherBall,
          iDist: tmpDist,
          index_ball: i,
        });
        if (minDist > tmpDist) {
          minDist = tmpDist;
          iPos = aCollisions.length - 1;
        }
      }
    }
  }
  
  // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
  if (aCollisions.length === 0) {
    return false;
  }
  
  // ... (–∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è)
};
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ

```javascript
this.update = function (aBalls) {
  _aBalls = aBalls;
  _bAllBallsStopped = true;
  
  // ‚úÖ –°—Ç—Ä–æ–∏–º —Å–µ—Ç–∫—É –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ –∫–∞–¥—Ä–∞
  this._buildSpatialGrid(aBalls);
  
  // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
  for (var i = 0; i < aBalls.length; i++) {
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞—Ä–æ–≤
  }
};
```

---

## ‚ö†Ô∏è –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —ç—Ç–æ –¥–ª—è –±–∏–ª—å—è—Ä–¥–∞?

### ‚úÖ –î–ê, —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–®–∞—Ä—ã –¥–≤–∏–∂—É—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ** - —Å–µ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
2. **–®–∞—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ —Å—Ç–æ–ª—É** - —Ä–µ–¥–∫–æ –≤—Å–µ –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ
3. **–†–∞–∑–º–µ—Ä —Å—Ç–æ–ª–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω** - —Å–µ—Ç–∫–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
4. **16 —à–∞—Ä–æ–≤ - –∏–¥–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** –¥–ª—è Spatial Hashing

### ‚ùå –ù–ï–¢, –µ—Å–ª–∏ –±—ã:

1. –®–∞—Ä—ã —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å (–Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º)
2. –ë—ã–ª–æ 1000+ —à–∞—Ä–æ–≤ (–Ω—É–∂–µ–Ω Quadtree –∏–ª–∏ BVH)
3. –°—Ç–æ–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–ª —Ä–∞–∑–º–µ—Ä

### üìä –î–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–∞—à –ø—Ä–æ–µ–∫—Ç | –ü–æ–¥—Ö–æ–¥–∏—Ç? |
|----------|------------|-----------|
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ | 16 —à–∞—Ä–æ–≤ | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |
| –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è | –ú–µ–¥–ª–µ–Ω–Ω–∞—è | ‚úÖ –î–∞ |
| –†–∞–∑–º–µ—Ä –æ–±–ª–∞—Å—Ç–∏ | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | ‚úÖ –î–∞ |
| –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ | –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ | ‚úÖ –î–∞ |

**–í—ã–≤–æ–¥: Spatial Hashing –ò–î–ï–ê–õ–¨–ù–û –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∏–ª—å—è—Ä–¥–∞!**

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| **–ü—Ä–æ–≤–µ—Ä–æ–∫ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π** | 120 | 20-30 | **-75%** |
| **CPU –Ω–∞ —Ñ–∏–∑–∏–∫—É** | 100% | 25-40% | **-60-75%** |
| **–ò–≥—Ä –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** | 100 | 250-400 | **+150-300%** |

### –ü–∞–º—è—Ç—å:

```
–°–µ—Ç–∫–∞: Map —Å ~20-30 –∫–ª—é—á–∞–º–∏
–ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞: –º–∞—Å—Å–∏–≤ –∏–∑ 1-3 —à–∞—Ä–æ–≤
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å: ~1-2 KB –Ω–∞ –∏–≥—Ä—É
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞–º—è—Ç—å!**

---

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### 1. Quadtree (–ö–≤–∞–¥—Ä–æ–¥–µ—Ä–µ–≤–æ)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ú–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤ (100+)
- –ù–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –æ–±–ª–∞—Å—Ç–∏

**–î–ª—è –±–∏–ª—å—è—Ä–¥–∞:** –ò–∑–±—ã—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω–æ

### 2. BVH (Bounding Volume Hierarchy)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- 3D –∏–≥—Ä—ã
- –°–ª–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã –æ–±—ä–µ–∫—Ç–æ–≤
- Ray tracing

**–î–ª—è –±–∏–ª—å—è—Ä–¥–∞:** –ò–∑–±—ã—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω–æ

### 3. Sweep and Prune

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ú–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–≤–∏–∂—É—Ç—Å—è –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
- 2D –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä—ã

**–î–ª—è –±–∏–ª—å—è—Ä–¥–∞:** –ú–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —á–µ–º Spatial Hashing

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ê, –≤–Ω–µ–¥—Ä—è–π—Ç–µ Spatial Hashing!**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
2. ‚úÖ –û–≥—Ä–æ–º–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (60-75%)
3. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–∞–º—è—Ç—å
4. ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–∏–ª—å—è—Ä–¥–∞
5. ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

**–ü–æ—Ä—è–¥–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
1. –°–Ω–∞—á–∞–ª–∞ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ ‚úÖ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
2. –ü–æ—Ç–æ–º - Spatial Hashing (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)
3. –ó–∞—Ç–µ–º - —Å–Ω–∏–∂–µ–Ω–∏–µ FPS –∏–ª–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π FPS

**–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –≤–Ω–µ–¥—Ä–∏–ª Spatial Hashing –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?**

