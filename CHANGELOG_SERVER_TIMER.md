# üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç–∞–π–º–µ—Ä

## –î–∞—Ç–∞: 2025-10-15

## üìù –°—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–æ–º –∫ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–µ—Ä–≤–µ—Ä–Ω–æ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —á–µ—Å—Ç–Ω–æ–π –∏–≥—Ä—ã –∏ –∑–∞—â–∏—Ç—ã –æ—Ç —á–∏—Ç–æ–≤.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (controllers/Game.js)

**–í–∫–ª—é—á–µ–Ω —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç–∞–π–º–µ—Ä:**
```javascript
// –°—Ç—Ä–æ–∫–∞ 129: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
this.startTurnTimer();
```

**–î–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã:**
```javascript
// –°—Ç—Ä–æ–∫–∞ 363: –í setStatus() –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
this.startTurnTimer();
```

**–£–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ turn-timeout:**
```javascript
// –°—Ç—Ä–æ–∫–∏ 298-299: –ö–ª–∏–µ–Ω—Ç –±–æ–ª—å—à–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è —Ç–∞–π–º–∞—É—Ç–∞
// –°–µ—Ä–≤–µ—Ä —Å–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è
```

### 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

#### CGame.js

**–£–ø—Ä–æ—â–µ–Ω startTurnTimer():**
```javascript
// –°—Ç—Ä–æ–∫–∏ 759-764: –ö–ª–∏–µ–Ω—Ç –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∞–π–º–µ—Ä–æ–º
this.startTurnTimer = function() {
  console.log("‚è±Ô∏è Client timer display mode (server-controlled)");
};
```

**–£–ø—Ä–æ—â–µ–Ω onTurnTimeout():**
```javascript
// –°—Ç—Ä–æ–∫–∏ 796-802: –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–µ–Ω—è–µ—Ç —Ö–æ–¥ —Å–∞–º
this.onTurnTimeout = function() {
  console.log("‚è∞ Waiting for server to change turn...");
};
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ testServerTimer():**
```javascript
// –°—Ç—Ä–æ–∫–∏ 864-882: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
window.testServerTimer = function() { ... }
```

#### CNTable.js

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ socket:**
```javascript
// –°—Ç—Ä–æ–∫–∞ 52: –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π socket
this.socket = null;
```

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è socket:**
```javascript
// –°—Ç—Ä–æ–∫–∏ 153-159: –í _init()
if (typeof socket !== 'undefined') {
  this.socket = socket;
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Ç–∞–π–º–µ—Ä–∞:**
```javascript
// –°—Ç—Ä–æ–∫–∏ 2026-2087: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞
onTimerStart()   // –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
onTimerUpdate()  // –û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
onTimerStop()    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
onTimerTimeout() // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "TIME'S UP!"
onTimerSync()    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ changeTurn():**
```javascript
// –°—Ç—Ä–æ–∫–∏ 341-362: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ "player1" ‚Üí 1, "player2" ‚Üí 2
var myNumericId = _playerId === "player1" ? 1 : 2;
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏

#### public/js/settings.js
```javascript
// –°—Ç—Ä–æ–∫–∞ 39: –í–∫–ª—é—á–µ–Ω —Ç–∞–π–º–µ—Ä
var TURN_TIMER_ENABLED = true;
```

## üîÑ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

### –°—Ç–∞—Ä–∞—è —Å—Ö–µ–º–∞ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è):
```
–ö–ª–∏–µ–Ω—Ç ‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–∞–π–º–µ—Ä ‚Üí –û—Ç—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è ‚Üí –ú–µ–Ω—è–µ—Ç —Ö–æ–¥
         ‚Üì
      –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Å–µ—Ä–≤–µ—Ä—É
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–µ—Ä–æ–º

### –ù–æ–≤–∞—è —Å—Ö–µ–º–∞ (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è):
```
–°–µ—Ä–≤–µ—Ä ‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–∞–π–º–µ—Ä ‚Üí –û—Ç—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è ‚Üí –ú–µ–Ω—è–µ—Ç —Ö–æ–¥
         ‚Üì                    ‚Üì                    ‚Üì
      timer-start          timer-update        changeTurn
         ‚Üì                    ‚Üì                    ‚Üì
      –ö–ª–∏–µ–Ω—Ç 1             –ö–ª–∏–µ–Ω—Ç 1            –ö–ª–∏–µ–Ω—Ç 1
      –ö–ª–∏–µ–Ω—Ç 2             –ö–ª–∏–µ–Ω—Ç 2            –ö–ª–∏–µ–Ω—Ç 2
         ‚Üì                    ‚Üì                    ‚Üì
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç            –û–±–Ω–æ–≤–ª—è–µ—Ç           –ú–µ–Ω—è–µ—Ç UI
```
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –°–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å

## üìä –°–æ–±—ã—Ç–∏—è Socket.IO

### –û—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∫ –∫–ª–∏–µ–Ω—Ç–∞–º:
| –°–æ–±—ã—Ç–∏–µ | –î–∞–Ω–Ω—ã–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| `timer-start` | `{playerId, timeLeft}` | –¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω |
| `timer-update` | `{playerId, timeLeft}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É |
| `timer-timeout` | `{playerId}` | –í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ |
| `timer-stop` | - | –¢–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω |
| `changeTurn` | `bFault` | –•–æ–¥ —Å–º–µ–Ω–∏–ª—Å—è |

### –û—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É:
**–ù–µ—Ç** - –∫–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è —Ç–∞–π–º–µ—Ä–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
showGameInfo()      // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
checkSocket()       // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∫–µ—Ç–∞
testServerTimer()   // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
```

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—É—é –∏–≥—Ä—É
2. –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
3. –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
4. –ß–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è):
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "TIME'S UP!"
   - –•–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –¥—Ä—É–≥–æ–º—É –∏–≥—Ä–æ–∫—É
   - –¢–∞–π–º–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `controllers/Game.js` - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ç–∞–π–º–µ—Ä–∞
2. `public/js/CGame.js` - —É–ø—Ä–æ—â–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞
3. `public/js/CNTable.js` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
4. `public/js/settings.js` - –≤–∫–ª—é—á–µ–Ω —Ç–∞–π–º–µ—Ä
5. `TIMER_SETUP.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
6. `SERVER_TIMER_INFO.md` - –Ω–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
7. `CHANGELOG_SERVER_TIMER.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –¢–∞–π–º–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
‚úÖ –ö–ª–∏–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —á–∏—Ç–æ–≤
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Ö–æ–¥–∞
‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ï—Å–ª–∏ —Ç–∞–π–º–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TURN_TIMER_ENABLED = true` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkSocket()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

